# 注释规范（Rust）

本项目以 Rust 原生文档注释（rustdoc）为主，兼顾必要的行内注释（`//`），用于解释复杂实现与异常处理分支。

## 1. 文档注释类型

- 文件/模块级：使用 `//!` 放在文件顶部，用于描述该模块整体职责。
- 类型/函数/常量级：使用 `///` 放在条目定义上方，生成 rustdoc。
- 行内解释：使用 `//`，仅用于复杂逻辑、关键分支或容易误解的实现细节。

## 2. 模块头模板（每个源文件顶部）

```text
//! <模块/文件职责一句话概述>
//!
//! 功能：
//! - ...
//! - ...
//!
//! 作者：小海智能助手项目组（自动生成）
//! 创建时间：2026-02-04
//! 修改时间：2026-02-04
```

## 3. 函数/类型模板

建议在 `///` 中包含以下要点（按需裁剪）：

- 功能概述：一句话说明做什么
- 参数：逐项说明参数含义与约束
- 返回值：说明返回值含义
- 异常处理：说明错误返回（`Result::Err`）的条件与语义；如存在 `panic!/expect/unwrap`，必须解释原因与触发条件
- 安全性：涉及密钥、权限、IPC、注册表等场景时补充安全注意事项

## 4. “注释覆盖率”口径（用于报告）

本项目的覆盖率统计采用“文档注释覆盖率”口径（近似衡量可生成 API 文档的程度）：

- 统计对象：`fn/struct/enum/trait/type/const/static`（包含 `pub` 与非 `pub`）
- 命中条件：该条目定义上方存在连续的 `///` 文档注释行
- 覆盖率：`已文档化条目数 / 总条目数`

说明：该口径不等同于“注释行数占比”，但更贴近“可维护/可审查”的文档化要求。

